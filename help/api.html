
<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=11' />
    <title>API 文档 | 智简云</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href='apibase.css' rel='stylesheet' />
    <link href='apistyle.css' rel='stylesheet' />
    <link href='railscasts.css' rel='stylesheet' />
  </head>
  <body>
    <!--START--><div id='app'><div class="container unlimiter" data-reactroot="" data-reactid="1" data-react-checksum="418540799"><div class="fixed-top fixed-right space-left20" data-reactid="2"><div class="fill-dark col6 pin-right" data-reactid="3"></div></div><div class="space-top5 scroll-styled overflow-auto pad1 width20 sidebar fixed-left fill-light light" data-reactid="4"><div class="pad0x small" data-reactid="5"><div class="small pad0x quiet space-top1 nav-section-name" data-reactid="6">简介</div><a href="#api-文档简介" class="nav-item block " data-reactid="7">API 文档简介</a><div class="small pad0x quiet space-top1 nav-section-name" data-reactid="8">基础</div><a href="#认证" class="nav-item block " data-reactid="9">认证</a><a href="#错误" class="nav-item block " data-reactid="10">错误</a><div class="small pad0x quiet space-top1 nav-section-name" data-reactid="14">费用</div><a href="#charges-支付" class="nav-item block " data-reactid="15">Charges 支付</a><div class="small pad0x quiet space-top1 nav-section-name" data-reactid="38">API更新</div><a href="#api-更新日志" class="nav-item block " data-reactid="39">API 更新日志</a></div></div><div class="space-left20" data-reactid="40"><div class="" data-reactid="41"><div class="clearfix" data-reactid="42"><div data-title="API 文档简介" class="keyline-top section contain clearfix " data-reactid="43"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="44"><h2 id="api-文档简介">API 文档简介</h2>

    <p>SlipsCloud 采用 先进设计。所有接口请求地址都是可预期的以及面向资源的。使用规范的。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="45"><h4 id="官方-sdk">官方 SDK</h4>
<blockquote>
<p>SlipsCloud 提供多语言多平台的 <a href="https://www.slipscloud.com/docs/downloads">官方客户端和服务端</a>。</p>
</blockquote>
<h4 id="定义">定义</h4>
<div class='endpoint dark fill-blue round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>https://api.slipscloud.com</div>
    </div>
</div></div><div data-title="认证" class="keyline-top section contain clearfix " data-reactid="46"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="47"><h2 id="认证">认证</h2>
<p>在调用 API 时，必须提供 API Key 作为每个请求的身份验证。你可以在管理平台内管理你的 API Key。API Key 是商户在 SlipsCloud 系统中的身份标识，请安全存储，确保其不要被泄露。如需获取或更新 API Key ，也可以在管理平台的「企业设置」->「开发设置」内进行<a href="#">操作</a>。</p>
<p>SlipsCloud API 使用 ---- 进行认证。 。</p>
<p>API Key 分为 live 和 test 两种模式。分别对应真实交易环境和模拟测试交易环境并且可以实时切换。测试模式下的 API Key 会模拟交易等请求，但是不会产生任何真实交易行为和费用，便于调试和接入。 所有的 API 请求必须通过 HTTPS 发送，使用 HTTP 会被 SlipsCloud 服务器拒绝。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="48"><h4 id="请求示例">请求示例</h4>
<pre class='hljs'>curl https://api.slipscloud.com/v1/charges \
-u sk_test_ibbTe5jLGCi5rzfH4OqPW9KC:</pre>
<blockquote>
<p>请将示例中的 <code>sk_test_ibbTe5jLGCi5rzfH4OqPW9KC</code> 替换成你自己的 API Key。</p>
</blockquote>
</div></div><div data-title="错误" class="keyline-top section contain clearfix " data-reactid="49"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="50"><h2 id="错误">错误</h2>
<p>SlipsCloud API 使用 HTTP 状态码 (status code) 来表明一个 API 请求的成功或失败状态。返回 <code>HTTP 2XX</code> 表明 API 请求成功。返回 <code>HTTP 4XX</code> 表明在请求 API 时提供了错误信息，例如参数缺失、参数错误、支付渠道错误等。返回 <code>HTTP 5XX</code> 表明 API 请求时， 服务器发生了错误。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="51"><h4 id="http-返回状态码">HTTP 返回状态码</h4>
<blockquote>
<table>
<thead>
<tr>
<th>状态码</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>200 - OK</td>
<td>一切正常。</td>
</tr>
<tr>
<td>400 - Bad Request</td>
<td>一般由缺失参数，参数格式不正确等引起。</td>
</tr>
<tr>
<td>401 - Unauthorized</td>
<td>没有提供正确的 API Key。</td>
</tr>
<tr>
<td>402 - Request Failed</td>
<td>参数格式正确但是请求失败，一般由业务错误引起。</td>
</tr>
<tr>
<td>403 - Forbidden</td>
<td>调用接口超过套餐的并发限制，请
<a href="https://www.slipscloud.com">升级套餐</a>
或限流。</td>
</tr>
<tr>
<td>404 - Not Found</td>
<td>请求的资源不存在。</td>
</tr>
<tr>
<td>500, 502, 503, 504 - Server Errors</td>
<td>服务器出错。</td>
</tr>
</tbody>
</table>
</blockquote>
</div></div><div data-title="错误汇总" class="keyline-top section contain clearfix " data-reactid="52"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="53"><h3 id="错误汇总">错误汇总</h3>
<table>
<thead>
<tr>
<th><strong>返回属性</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>错误类型，可以是 
<code>invalid_request_error</code>
、
<code>api_error</code>
、
<code>channel_error</code>
 或 
<code>card_error</code>
。</td>
</tr>
<tr>
<td>message</td>
<td>返回具体的错误描述。</td>
</tr>
<tr>
<td>code 
<em>optional</em></td>
<td>错误码，由第三方支付渠道返回的错误代码。</td>
</tr>
<tr>
<td>param 
<em>optional</em></td>
<td>当发生参数错误时返回具体的参数名，如 id。</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="54"><h4 id="错误类型-type">错误类型 (type)</h4>
<blockquote>
<table>
<thead>
<tr>
<th><strong>错误类型</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>invalid_request_error</td>
<td>请求错误，传入了不正确的地址，参数或值。</td>
</tr>
<tr>
<td>api_error</td>
<td>SlipsCloud 服务器出现的异常错误。</td>
</tr>
<tr>
<td>channel_error</td>
<td>第三方支付渠道出现的错误导致请求出现错误。通常你需要对这些可能出现的情况进行处理或者联系我们。</td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="错误码-code">错误码 (code)</h4>
<blockquote>
<table>
<thead>
<tr>
<th>错误码</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>charge_closed</td>
<td>支付订单已结束，不能进行后续操作。</td>
</tr>
<tr>
<td>charge_unexpected_status</td>
<td>支付返回意外的状态码。</td>
</tr>
 <!--
<tr>
<td>refund_wait_operation</td>
<td>退款需要等待用户进一步操作。</td>
</tr>
<tr>
<td>refund_refused</td>
<td>退款失败，被支付渠道拒绝。</td>
</tr>
<tr>
<td>refund_retry</td>
<td>退款失败，需要重新发起退款。</td>
</tr>
<tr>
<td>refund_manual_intervention</td>
<td>退款失败，需要通过线下或转账进行退款。</td>
</tr>
<tr>
<td>refund_unexpected_status</td>
<td>退款返回意外的状态码。</td>
</tr>
<tr>
<td>channel_connection_error</td>
<td>支付渠道通讯异常。</td>
</tr>
<tr>
<td>channel_request_error</td>
<td>请求支付渠道接口失败。</td>
</tr>
<tr>
<td>channel_parse_error</td>
<td>支付渠道返回意外的数据格式发生的解析错误。</td>
</tr>
<tr>
<td>channel_sign_error</td>
<td>支付渠道返回的数据没有通过签名验证。</td>
</tr>
<tr>
<td>channel_unexpected_error</td>
<td>支付渠道遇到未知错误。</td>
</tr>
<tr>
<td>channel_parameter_error</td>
<td>支付渠道参数错误。</td>
</tr>
<tr>
<td>channel_auth_error</td>
<td>支付渠道参数错误</td>
</tr>
<tr>
<td>channel_response_code_fail</td>
<td>支付渠道响应码错误。</td>
</tr>
<tr>
<td>channel_parameters_consistency_error</td>
<td>支付渠道参数一致性检测失败。</td>
</tr>
<tr>
<td>channel_not_support_red_envelope</td>
<td>您的微信参数版本不支持发送红包。请联系微信升级为新版本。</td>
</tr>
<tr>
<td>channel_not_support_transfer</td>
<td>您的微信参数版本不支持发送企业付款。请联系微信升级为新版本。</td>
</tr>
<tr>
<td>channel_request_info</td>
<td>来自渠道的信息</td>
</tr>
<tr>
<td>query_right_error</td>
<td>支付渠道查询权限错误,请登录支付宝在线人工窗口，免费签约“账务明细”接口和“交易查询”接口。</td>
</tr>
<tr>
<td>channel_notify_id_error</td>
<td>支付渠道的NOTIFY ID非法或已失效</td>
</tr>
<tr>
<td>charge_order_no_used</td>
<td>订单号已使用。请用新的订单号发起交易。</td>
</tr>
<tr>
<td>transfer_wait_operation</td>
<td>转账需要打开地址进行下一步付款操作</td>
</tr>
<tr>
<td>refund_refused_msg</td>
<td>退款已被支付渠道拒绝。</td>
</tr>
<tr>
<td>refund_pending</td>
<td>退款状态未明，请稍后查询。</td>
</tr>
<tr>
<td>refund_failed</td>
<td>退款失败</td>
</tr>
<tr>
<td>refund_info_from_channel</td>
<td>来自渠道的退款信息。</td>
</tr>
<tr>
<td>refund_not_found</td>
<td>未在渠道查找到相应退款信息。</td>
</tr>
<tr>
<td>red_system_busy</td>
<td>支付渠道系统繁忙，请稍后用同一商户单号再次调用。只会发送一个红包。</td>
</tr>
<tr>
<td>transfer_system_busy</td>
<td>支付渠道系统繁忙，请稍后用同一商户单号再次调用。只会发送一笔转账。</td>
</tr>
<tr>
-->
<td>qgbc_term_amount_too_small</td>
<td>订单金额过小，不支持分期。</td>
</tr>
</tbody>
</table>
</blockquote>

</div></div><div data-title="Charges 支付" class="keyline-top section contain clearfix " data-reactid="64"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="65"><h2 id="charges-支付">Charges 支付</h2>
<p>你可以创建一个 <code>charge</code> 对象向用户收款。 charge 是一个支付凭据对象，所有和支付相关的要素信息都存储在这个对象中，你的服务端可以通过发起支付请求来创建一个新的 <code>charge</code> 对象，也可以随时查询一个或者多个 <code>charge</code> 对象的状态。每个 <code>charge</code> 对象都拥有一个标识 <code>id</code>，该 <code>id</code> 在 SlipsCloud 系统内唯一。</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>id 
<em>string</em></td>
<td>由 SlipsCloud 生成的支付对象 ID，
<code>27</code>
 位字符串。</td>
</tr>
<tr>
<td>object 
<em>string</em></td>
<td>值为 "charge"。</td>
</tr>
<tr>
<td>created 
<em>timestamp</em></td>
<td>支付创建时的 Unix 时间戳。</td>
</tr>
<!--
<tr>
<td>livemode 
<em>boolean</em></td>
<td>是否处于 
<code>live</code>
 模式。</td>
</tr>
<tr>
<td>paid 
<em>boolean</em></td>
<td>是否已付款。</td>
</tr>
<tr>
<td>refunded 
<em>boolean</em></td>
<td>是否存在退款信息，无论退款是否成功。</td>
</tr>
<tr>
<td>app 
<strong>expandable</strong>
 
<em>string</em></td>
<td>支付使用的 
<code>app</code>
 对象的 
<code>id</code>
，expandable 可展开，查看
<a href="#">如何获取App ID</a>
。</td>
</tr>
<tr>
<td>channel 
<em>string</em></td>
<td>支付使用的第三方支付渠道，详情参考 
<a href="#%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93%E5%B1%9E%E6%80%A7%E5%80%BC">支付渠道属性值</a>
。</td>
</tr>
<tr>
<td>order_no 
<em>string</em></td>
<td>商户订单号，适配每个渠道对此参数的要求，必须在商户系统内唯一。(
<code>alipay</code>
: 1-64 位， 
<code>wx</code>
: 2-32 位，
<code>bfb</code>
: 1-20 位，
<code>upacp</code>
: 8-40 位，
<code>yeepay_wap</code>
:1-50 位，
<code>jdpay_wap</code>
:1-30 位，
<code>qpay</code>
:1-30 位，
<code>cmb_wallet</code>
:10 位纯数字字符串。注：除 
<code>cmb_wallet</code>
 外的其他渠道推荐使用 8-20 位，要求数字或字母，不允许特殊字符)。</td>
</tr>
<tr>
<td>client_ip 
<em>ip address</em></td>
<td>发起支付请求客户端的 IP 地址，格式为 IPv4 整型，如 127.0.0.1。</td>
</tr>
<tr>
<td>amount 
<em>int</em></td>
<td>订单总金额（必须大于0），单位为对应币种的最小货币单位，人民币为分。如订单总金额为 1 元，
<code>amount</code>
 为 100，么么贷商户请查看申请的借贷金额范围。</td>
</tr>
<tr>
<td>amount_settle 
<em>int</em></td>
<td>清算金额，单位为对应币种的最小货币单位，人民币为分。</td>
</tr>
<tr>
<td>currency 
<em>string</em></td>
<td>3 位 ISO 货币代码，人民币为 
<code>cny</code>
。</td>
</tr>
<tr>
<td>subject 
<em>string</em></td>
<td>商品标题，该参数最长为 32 个 Unicode 字符，银联全渠道（
<code>upacp</code>
/
<code>upacp_wap</code>
）限制在 32 个字节。</td>
</tr>
<tr>
<td>body 
<em>string</em></td>
<td>商品描述信息，该参数最长为 128 个 Unicode 字符，
<code>yeepay_wap</code>
 对于该参数长度限制为 100 个 Unicode 字符。</td>
</tr>
<tr>
<td>extra 
<em>object</em></td>
<td>特定渠道发起交易时需要的额外参数，以及部分渠道支付成功返回的额外参数，详细参考
<a href="#%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93-extra-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">支付渠道 extra 参数说明</a>
。</td>
</tr>
<tr>
<td>time_paid 
<em>timestamp</em></td>
<td>订单支付完成时的 Unix 时间戳。（银联支付成功时间为接收异步通知的时间）</td>
</tr>
<tr>
<td>time_expire 
<em>timestamp</em></td>
<td>订单失效时的 Unix 时间戳。时间范围在订单创建后的 1 分钟到 15 天，默认为 1 天，创建时间以 SlipsCloud 服务器时间为准。 微信对该参数的有效值限制为 2 小时内；银联对该参数的有效值限制为 1 小时内。</td>
</tr>
<tr>
<td>time_settle 
<em>timestamp</em></td>
<td>订单清算时间，用 Unix 时间戳表示。（暂不生效）</td>
</tr>
<tr>
<td>transaction_no 
<em>string</em></td>
<td>支付渠道返回的交易流水号。</td>
</tr>
<tr>
<td>refunds 
<em>list</em></td>
<td>退款详情列表，详见 
<a href="#refunds-%E9%80%80%E6%AC%BE">Refunds 退款</a>
。</td>
</tr>
<tr>
<td>amount_refunded 
<em>int</em></td>
<td>已退款总金额，单位为对应币种的最小货币单位，例如：人民币为分。</td>
</tr>
<tr>
<td>failure_code 
<em>string</em></td>
<td>订单的错误码，详见 
<a href="#%E9%94%99%E8%AF%AF">错误</a>
中的错误码描述。</td>
</tr>
<tr>
<td>failure_msg 
<em>string</em></td>
<td>订单的错误消息的描述。</td>
</tr>
<tr>
<td>metadata 
<em>hash</em></td>
<td>详见 
<a href="#%E5%85%83%E6%95%B0%E6%8D%AE">元数据</a>
。</td>
</tr>
-->
<tr>
<td>credential 
<em>object</em></td>
<td>支付凭证，用于客户端发起支付。</td>
</tr>
<tr>
<td>description 
<em>string</em></td>
<td>订单附加说明，最多 255 个 Unicode 字符。</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="66"><h4 id="对象示例">对象示例</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ch_Hm5uTSifDOuTy9iLeLPSurrD"</span>,
  <span class="hljs-attr">"object"</span>: <span class="hljs-string">"charge"</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-number">1410778843</span>,
  <span class="hljs-attr">"livemode"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"paid"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"refunded"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"app"</span>: <span class="hljs-string">"app_1Gqj58ynP0mHeX1q"</span>,
  <span class="hljs-attr">"channel"</span>: <span class="hljs-string">"upacp"</span>,
  <span class="hljs-attr">"order_no"</span>: <span class="hljs-string">"123456789"</span>,
  <span class="hljs-attr">"client_ip"</span>: <span class="hljs-string">"127.0.0.1"</span>,
  <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"amount_settle"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"cny"</span>,
  <span class="hljs-attr">"subject"</span>: <span class="hljs-string">"Your Subject"</span>,
  <span class="hljs-attr">"body"</span>: <span class="hljs-string">"Your Body"</span>,
  <span class="hljs-attr">"extra"</span>:{},
  <span class="hljs-attr">"time_paid"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"time_expire"</span>: <span class="hljs-number">1410782443</span>,
  <span class="hljs-attr">"time_settle"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"transaction_no"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"refunds"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"list"</span>,
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/v1/charges/ch_Hm5uTSifDOuTy9iLeLPSurrD/refunds"</span>,
    <span class="hljs-attr">"has_more"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"data"</span>: []
  },
  <span class="hljs-attr">"amount_refunded"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"failure_code"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"failure_msg"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"credential"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"credential"</span>,
    <span class="hljs-attr">"upacp"</span>: {
      <span class="hljs-attr">"tn"</span>: <span class="hljs-string">"201409151900430000000"</span>,
      <span class="hljs-attr">"mode"</span>: <span class="hljs-string">"01"</span>
    }
  },
  <span class="hljs-attr">"description"</span>: <span class="hljs-literal">null</span>
}</pre>
</div></div><div data-title="创建 Charge 对象" class="keyline-top section contain clearfix " data-reactid="67"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="68"><h3 id="创建-charge-对象">创建 Charge 对象</h3>
<p>发起一次支付请求时需要创建一个新的 <code>charge</code> 对象，获取一个可用的支付凭据用于客户端向第三方渠道发起支付请求。如果使用测试模式的 API Key，则不会发生真实交易。当支付成功后，SlipsCloud 会发送 通知。</p>
<table>
<thead>
<tr>
<th>请求参数</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>order_no 
<strong>required</strong></td>
<td>商户订单号，适配每个渠道对此参数的要求，必须在商户系统内唯一。(
<code>alipay</code>
: 1-64 位， 
<code>wx</code>
: 2-32 位，
<code>bfb</code>
: 1-20 位，
<code>upacp</code>
: 8-40 位，
<code>yeepay_wap</code>
:1-50 位，
<code>jdpay_wap</code>
:1-30 位，
<code>qpay</code>
:1-30 位，
<code>cmb_wallet</code>
:10 位纯数字字符串。注：除 
<code>cmb_wallet</code>
 外的其他渠道推荐使用 8-20 位，要求数字或字母，不允许特殊字符)。</td>
</tr>
<tr>
<td>app
[
id
]
 
<strong>expandable</strong>
 
<strong>required</strong></td>
<td>支付使用的 
<code>app</code>
 对象的 
<code>id</code>
，
<code>expandable</code>
 可展开，查看
<a href="#">如何获取App ID</a>
。</td>
</tr>
<tr>
<td>channel 
<strong>required</strong></td>
<td>支付使用的第三方支付渠道。参考 
<a href="#%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93%E5%B1%9E%E6%80%A7%E5%80%BC">支付渠道属性值</a>
。</td>
</tr>
<tr>
<td>amount 
<strong>required</strong></td>
<td>订单总金额（必须大于0），单位为对应币种的最小货币单位，人民币为分。如订单总金额为 1 元，
<code>amount</code>
 为 100，么么贷商户请查看申请的借贷金额范围。</td>
</tr>
<tr>
<td>client_ip 
<strong>required</strong></td>
<td>发起支付请求客户端的 IPv4 地址，如: 127.0.0.1。</td>
</tr>
<tr>
<td>currency 
<strong>required</strong></td>
<td>三位 ISO 货币代码，目前仅支持人民币 
<code>cny</code>
。</td>
</tr>
<tr>
<td>subject 
<strong>required</strong></td>
<td>商品的标题，该参数最长为 32 个 Unicode 字符，银联全渠道（
<code>upacp</code>
/
<code>upacp_wap</code>
）限制在 32 个字节。</td>
</tr>
<tr>
<td>body 
<strong>required</strong></td>
<td>商品的描述信息，该参数最长为 128 个 Unicode 字符，yeepay_wap 对于该参数长度限制为 100 个 Unicode 字符。</td>
</tr>
<tr>
<td>extra 
<em>optional</em></td>
<td>特定渠道发起交易时需要的额外参数，以及部分渠道支付成功返回的额外参数，详细参考
<a href="#%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93-extra-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">支付渠道 extra 参数说明</a>
。</td>
</tr>
<tr>
<td>time_expire 
<em>optional</em></td>
<td>订单失效时间，用 Unix 时间戳表示。时间范围在订单创建后的 1 分钟到 15 天，默认为 1 天，创建时间以 SlipsCloud 服务器时间为准。 微信对该参数的有效值限制为 2 小时内；银联对该参数的有效值限制为 1 小时内。</td>
</tr>
<tr>
<td>metadata 
<em>optional</em></td>
<td>参考 
<a href="#%E5%85%83%E6%95%B0%E6%8D%AE">元数据</a>
。</td>
</tr>
<tr>
<td>description 
<em>optional</em></td>
<td>订单附加说明，最多 255 个 Unicode 字符。</td>
</tr>
</tbody>
</table>
<p><strong>返回</strong></p>
<p>返回一个支付凭据 <code>charge</code> 对象。鉴于支付渠道对 <code>order_no</code> 的合法性要求，为了保证支付请求的正确处理，请务必保证对于同一支付渠道下，不同支付产品间 <code>order_no</code> 的唯一性。例如：已在微信公众号下使用的 <code>order_no</code> 则无法在微信支付以及微信公众号扫码下重复使用，该规则同样适用于其他同类渠道。如果发生错误，则会返回错误码和错误详情，详见 <a href="#%E9%94%99%E8%AF%AF">错误</a>。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="69"><h4 id="定义-1">定义</h4>
<pre class='hljs'>POST https://api.slipscloud.com/v1/charges</pre>
<h4 id="请求示例-4">请求示例</h4>
<pre class='hljs'>curl https://api.slipscloud.com/v1/charges \
-u sk_test_ibbTe5jLGCi5rzfH4OqPW9KC: \
-d order_no=123456789 \
-d amount=100 \
-d app[id]=app_1Gqj58ynP0mHeX1q \
-d channel=upacp \
-d currency=cny \
-d client_ip=127.0.0.1 \
-d subject=<span class="hljs-string">"Your Subject"</span> \
-d body=<span class="hljs-string">"Your Body"</span></pre>
<h4 id="返回示例-2">返回示例</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ch_L8qn10mLmr1GS8e5OODmHaL4"</span>,
  <span class="hljs-attr">"object"</span>: <span class="hljs-string">"charge"</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-number">1410834527</span>,
  <span class="hljs-attr">"livemode"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"paid"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"refunded"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"app"</span>: <span class="hljs-string">"app_1Gqj58ynP0mHeX1q"</span>,
  <span class="hljs-attr">"channel"</span>: <span class="hljs-string">"upacp"</span>,
  <span class="hljs-attr">"order_no"</span>: <span class="hljs-string">"123456789"</span>,
  <span class="hljs-attr">"client_ip"</span>: <span class="hljs-string">"127.0.0.1"</span>,
  <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"amount_settle"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"cny"</span>,
  <span class="hljs-attr">"subject"</span>: <span class="hljs-string">"Your Subject"</span>,
  <span class="hljs-attr">"body"</span>: <span class="hljs-string">"Your Body"</span>,
  <span class="hljs-attr">"extra"</span>:{},
  <span class="hljs-attr">"time_paid"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"time_expire"</span>: <span class="hljs-number">1410838127</span>,
  <span class="hljs-attr">"time_settle"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"transaction_no"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"refunds"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"list"</span>,
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/v1/charges/ch_L8qn10mLmr1GS8e5OODmHaL4/refunds"</span>,
    <span class="hljs-attr">"has_more"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"data"</span>: [ ]
  },
  <span class="hljs-attr">"amount_refunded"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"failure_code"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"failure_msg"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"metadata"</span>: {},
  <span class="hljs-attr">"credential"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"credential"</span>,
    <span class="hljs-attr">"upacp"</span>: {
      <span class="hljs-attr">"tn"</span>: <span class="hljs-string">"201409161028470000000"</span>,
      <span class="hljs-attr">"mode"</span>: <span class="hljs-string">"01"</span>
    }
  },
  <span class="hljs-attr">"description"</span>: <span class="hljs-literal">null</span>
}</pre>
</div></div><div data-title="查询 Charge 对象" class="keyline-top section contain clearfix " data-reactid="70"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="71"><h3 id="查询-charge-对象">查询 Charge 对象</h3>
<p>你可以在后台异步通知之前，通过查询接口确认支付状态。通过<code>charge</code>对象的<code>id</code>查询一个已创建的<code>charge</code>对象。</p>
<table>
<thead>
<tr>
<th>请求参数</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>id  
<strong>required</strong></td>
<td>查询的 
<code>charge</code>
 对象 
<code>id</code>
。</td>
</tr>
</tbody>
</table>
<p><strong>返回</strong></p>
<p>返回一个已存在的 <code>charge</code> 对象或者一个错误，详见 <a href="#%E9%94%99%E8%AF%AF">错误</a>。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="72"><h4 id="定义-2">定义</h4>
<pre class='hljs'>GET https://api.slipscloud.com/v1/charges/{CHARGE_ID}</pre>
<h4 id="请求示例-5">请求示例</h4>
<pre class='hljs'>curl https://api.slipscloud.com/v1/charges/ch_L8qn10mLmr1GS8e5OODmHaL4 \
-u sk_test_ibbTe5jLGCi5rzfH4OqPW9KC:</pre>
<h4 id="返回示例-3">返回示例</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ch_L8qn10mLmr1GS8e5OODmHaL4"</span>,
  <span class="hljs-attr">"object"</span>: <span class="hljs-string">"charge"</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-number">1410834527</span>,
  <span class="hljs-attr">"livemode"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"paid"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"refunded"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"app"</span>: <span class="hljs-string">"app_1Gqj58ynP0mHeX1q"</span>,
  <span class="hljs-attr">"channel"</span>: <span class="hljs-string">"upacp"</span>,
  <span class="hljs-attr">"order_no"</span>: <span class="hljs-string">"123456789"</span>,
  <span class="hljs-attr">"client_ip"</span>: <span class="hljs-string">"127.0.0.1"</span>,
  <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"amount_settle"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"cny"</span>,
  <span class="hljs-attr">"subject"</span>: <span class="hljs-string">"Your Subject"</span>,
  <span class="hljs-attr">"body"</span>: <span class="hljs-string">"Your Body"</span>,
  <span class="hljs-attr">"extra"</span>:{},
  <span class="hljs-attr">"time_paid"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"time_expire"</span>: <span class="hljs-number">1410838127</span>,
  <span class="hljs-attr">"time_settle"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"transaction_no"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"refunds"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"list"</span>,
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/v1/charges/ch_L8qn10mLmr1GS8e5OODmHaL4/refunds"</span>,
    <span class="hljs-attr">"has_more"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"data"</span>: [ ]
  },
  <span class="hljs-attr">"amount_refunded"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"failure_code"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"failure_msg"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"metadata"</span>: {},
  <span class="hljs-attr">"credential"</span>: {
    <span class="hljs-attr">"object"</span>: <span class="hljs-string">"credential"</span>,
    <span class="hljs-attr">"upacp"</span>: {
      <span class="hljs-attr">"tn"</span>: <span class="hljs-string">"201409161028470000000"</span>,
      <span class="hljs-attr">"mode"</span>: <span class="hljs-string">"01"</span>
    }
  },
  <span class="hljs-attr">"description"</span>: <span class="hljs-literal">null</span>
}</pre>
</div></div><div data-title="查询 Charge 对象列表" class="keyline-top section contain clearfix " data-reactid="73"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="74"><h3 id="查询-charge-对象列表">查询 Charge 对象列表</h3>
<p>返回之前创建过 <code>charge</code> 对象的一个列表。列表是按创建时间进行排序，总是将最新的 <code>charge</code> 对象显示在最前。</p>
<table>
<thead>
<tr>
<th><strong>请求参数</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>limit 
<em>optional</em></td>
<td>限制有多少对象可以被返回，限制范围是从 1-20 项，默认是 10 项。</td>
</tr>
<tr>
<td>starting_after 
<em>optional</em></td>
<td>在分页时使用的指针，决定了列表的第一项从何处开始。假设你的一次请求返回列表的最后一项的 
<code>id</code>
 是 
<code>obj_end</code>
，你可以使用 
<code>starting_after</code>
 = 
<code>obj_end</code>
 去获取下一页。</td>
</tr>
<tr>
<td>ending_before 
<em>optional</em></td>
<td>在分页时使用的指针，决定了列表的最末项在何处结束。假设你的一次请求返回列表的最后一项的 
<code>id</code>
 是 
<code>obj_start</code>
，你可以使用 
<code>ending_before</code>
 = 
<code>obj_start</code>
 去获取上一页。</td>
</tr>
<tr>
<td>created 
<em>optional</em></td>
<td>对象的创建时间，用 Unix 时间戳表示。具体参考下表 
<code>created</code>
 参数。</td>
</tr>
<tr>
<td>app
[
id
]
  
<strong>expandable</strong>
 
<strong>required</strong></td>
<td>支付使用的 
<code>app</code>
 对象的 
<code>id</code>
，expandable 可展开，查看
<a href="#">如何获取App ID</a>
。</td>
</tr>
<tr>
<td>channel 
<em>optional</em></td>
<td>支付使用的支付渠道。参考 
<a href="#%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93%E5%B1%9E%E6%80%A7%E5%80%BC">支付渠道属性值</a>
。</td>
</tr>
<tr>
<td>paid 
<em>optional</em></td>
<td>是否已付款。</td>
</tr>
<tr>
<td>refunded 
<em>optional</em></td>
<td>是否存在退款信息，无论退款是否成功。</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong><code>created</code> 参数</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>created
[
gt
]
 
<em>optional</em>
 
<em>int</em></td>
<td>大于 
<code>charge</code>
 对象的创建时间，用 Unix 时间戳表示。</td>
</tr>
<tr>
<td>created
[
gte
]
 
<em>optional</em>
 
<em>int</em></td>
<td>大于或等于 
<code>charge</code>
 对象的创建时间，用 Unix 时间戳表示。</td>
</tr>
<tr>
<td>created
[
lt
]
 
<em>optional</em>
 
<em>int</em></td>
<td>小于 
<code>charge</code>
 对象的创建时间，用 Unix 时间戳表示。</td>
</tr>
<tr>
<td>created
[
lte
]
 
<em>optional</em>
 
<em>int</em></td>
<td>小于或等于 
<code>charge</code>
 对象的创建时间，用 Unix 时间戳表示。</td>
</tr>
</tbody>
</table>
<p><strong>返回</strong></p>
<p>返回一个已存在的 charge 对象列表或者一个错误，详见 <a href="#%E9%94%99%E8%AF%AF">错误</a>。</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-dark space-top5 right-content dark" data-reactid="75"><h4 id="定义-3">定义</h4>
<pre class='hljs'>GET https://api.slipscloud.com/v1/charges?expand[]=app</pre>
<h4 id="请求示例-6">请求示例</h4>
<pre class='hljs'>curl https://api.slipscloud.com/v1/charges/?<span class="hljs-built_in">limit</span>=3&amp;expand[]=app \
-u sk_test_ibbTe5jLGCi5rzfH4OqPW9KC:</pre>
<h4 id="返回示例-4">返回示例</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"object"</span>: <span class="hljs-string">"list"</span>,
  <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/v1/charges"</span>,
  <span class="hljs-attr">"has_more"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"data"</span>: [
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"ch_L8qn10mLmr1GS8e5OODmHaL4"</span>,
      <span class="hljs-attr">"object"</span>: <span class="hljs-string">"charge"</span>,
      <span class="hljs-attr">"created"</span>: <span class="hljs-number">1410834527</span>,
      <span class="hljs-attr">"livemode"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"paid"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"refunded"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"app"</span>: <span class="hljs-string">"app_1Gqj58ynP0mHeX1q"</span>,
      <span class="hljs-attr">"channel"</span>: <span class="hljs-string">"upacp"</span>,
      <span class="hljs-attr">"order_no"</span>: <span class="hljs-string">"123456789"</span>,
      <span class="hljs-attr">"client_ip"</span>: <span class="hljs-string">"127.0.0.1"</span>,
      <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">"amount_settle"</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">"currency"</span>: <span class="hljs-string">"cny"</span>,
      <span class="hljs-attr">"subject"</span>: <span class="hljs-string">"Your Subject"</span>,
      <span class="hljs-attr">"body"</span>: <span class="hljs-string">"Your Body"</span>,
      <span class="hljs-attr">"extra"</span>:{},
      <span class="hljs-attr">"time_paid"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"time_expire"</span>: <span class="hljs-number">1410838127</span>,
      <span class="hljs-attr">"time_settle"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"transaction_no"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"refunds"</span>: {
        <span class="hljs-attr">"object"</span>: <span class="hljs-string">"list"</span>,
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/v1/charges/ch_L8qn10mLmr1GS8e5OODmHaL4/refunds"</span>,
        <span class="hljs-attr">"has_more"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"data"</span>: [ ]
      },
      <span class="hljs-attr">"amount_refunded"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"failure_code"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"failure_msg"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"metadata"</span>: {},
      <span class="hljs-attr">"credential"</span>: {
        <span class="hljs-attr">"object"</span>: <span class="hljs-string">"credential"</span>,
        <span class="hljs-attr">"upacp"</span>: {
          <span class="hljs-attr">"tn"</span>: <span class="hljs-string">"201409161028470000000"</span>,
          <span class="hljs-attr">"mode"</span>: <span class="hljs-string">"01"</span>
        }
      },
      <span class="hljs-attr">"description"</span>: <span class="hljs-literal">null</span>
    }
  ]
}</pre>

</div></div><div data-title="API 更新日志" class="keyline-top section contain clearfix " data-reactid="188"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="189"><h2 id="api-更新日志">API 更新日志</h2>
<hr>
</div></div><div data-title="2017-06-18" class="keyline-top section contain clearfix " data-reactid="190"><div class="space-bottom8 col6 pad2x prose clip left-content" data-reactid="191"><h3 id="2017-06-15">2017-06-15</h3>
<ol>
<li>2017年6月18日发表0.02版本，详情请参考<a href="#">API文档</a>。</li>
</ol>
</div></div></div></div></div><div class="fixed-top space-left20" data-reactid="250"><div class="events fill-blue dark bottom-shadow pad1 col6 pin-topright  " data-reactid="251"><div class="space-right1 small quiet inline" data-reactid="252"></div><div class="rounded-toggle inline short" data-reactid="253"><a class="strong active" data-reactid="254">cURL</a><a class="strong " data-reactid="255">PHP</a><a class="strong " data-reactid="256">Java</a><a class="strong " data-reactid="257">Ruby</a><a class="strong " data-reactid="258">Node</a><a class="strong " data-reactid="259">Python</a><a class="strong " data-reactid="260">Go</a><a class="strong " data-reactid="261">C#</a></div><div class="fr pad0" data-reactid="262"><a title="Display as 1 column" style="cursor:pointer;" class="icon quiet caret-left pad0 fill-lighten0 round" data-reactid="263"></a></div></div></div><div class="fill-light fixed-top header pad0 width20" data-reactid="264"><a href="/" class="logo" data-reactid="265">API</a></div></div></div><!--STOP-->
   <!-- <script src='../../static/api/bundle.js'></script>-->
  </body>
</html>
